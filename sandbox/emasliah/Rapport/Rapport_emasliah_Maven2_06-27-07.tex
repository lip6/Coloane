\documentclass[a4paper,10pt]{article}

\usepackage[utf-8]{inputenc}

%opening
\title{Rapport : Maven 2}
\author{Eric Masliah\\
Equipe MoVe}
\date{27 Juin 2007}

\begin{document}

\maketitle

\begin{abstract}
Ce document décrit la structure d'un fichier \texttt{pom.xml} de configuration pour le \textit{builder} Maven 2, ainsi que fonctionnement général de Maven 2.
\end{abstract}

\section{Introduction}
Maven 2 est un make trés avancé et spécialement pratique pour les projets java.
Il permet entre autre de gerer la structure du projet, de lancer les tests et de packager.
Lors de ce rapport, j'utilise la version 2.0.6 de Maven.

\section{Exemple}
Tout au long de mon rapport, je vais m'aider d'un exemple : coloane.\\
Voici l'architecture du projet sur le disque :\\
\\
fr.lip6.move.coloane
\begin{itemize}
  \item pom.xml
  \item branches
  \item tags
  \item trunk
  \begin{itemize}
    \item apicami
      \begin{itemize}
        \item pom.xml
        \item src
        \item test
      \end{itemize}
    \item core
      \begin{itemize}
        \item pom.xml
        \item src
        \item test
      \end{itemize}
    \item interfaces
      \begin{itemize}
        \item pom.xml
        \item src
        \item test
      \end{itemize}
  \end{itemize}
\end{itemize}

\section{Pom}
Maven utilise comme Makefile un fichier pom.xml. Certaines balises ont des noms évidement (je n'en parlerais donc pas ici), d'autre non.\\
\textit{Ex : Nous avons un pom au niveau du projet general et un pom dans chaque sous projet}

\subsection{modelVersion}
Pour l'instant, prend toujours la valeur 4.0.0

\subsection{groupId et artifactId}
Permet de donner un nom unique à chaque partie d'un projet.\\
groupID represente souvent le package general du projet.\\
\textit{Ex : fr.lip6.move.coloane}\\
artifactId represente quand à lui le nom du projet meme meme nom que le dossier du projet.\\
\textit{Ex : core, apicami et interfaces}

\subsection{packaging}
Permet de choisir le format de sortie.\\
Jar pour avoir un jar.\\
\textit{Ex : C'est le cas pour core, apicami et interfaces}
Pom pour ne rien avoir (cela sert surtout pour le super pom dont je parlerais plus loin).\\
\textit{Ex : C'est le cas fr.lip6.move.coloane}

\subsection{build}
Regroupe tout ce qui concerne la compilation du projet. Il contient diverses informations mais surtout la configuration des plugins.

\subsection{modules}
Permet de définir les sous projet d'un projet (quand c'est un multi projet). Chaque module dois avoir son propre pom. Si l'on enleve un module du pom, Maven ne le verra pas (Maven ne regarde que le pom, il ne regarde pas les dossiers).\\
Les modules seront traités dans l'ordre où ils sont écrit.\\
\textit{Ex : Dans fr.lip6.move.coloane : }
\begin{verbatim}
<modules>
  <module>interfaces</module>
  <module>apicami</module>
  <module>core</module>
</modules>
\end{verbatim}


\subsection{parent}
Permet de définir le super projet(grace a son groupId et son artifactId) dont hérite un projet.

\subsection{dependencies}
Les autres projets dont dépendent le projet.

\subsection{resources}
Les resources a rajouter dans le package.

\section{Super Pom}
Les pom des sous projets d'un projet herite de tout le pom du projet mais peuvent aussi réécrire les balises.

\section{Plugins}
Les plugins de Maven ont tous différents paramétres, ces derniers sont trouvables sur le site de Maven ou en utilisant la commande mvn help:describe -Dfull -Dplugin=\textit{nom du plugin}.

\subsection{configuration}
Permet de passer les paramétres au plugin

\subsection{goal}
Permet de dire quand le plugin dois s'exécuter dans le Lifecycle

\section{Lifecycle}
Maven marche par cycle de vie, c'est a dire qu'il prend une phase comme parametre et accomplis des buts pour réaliser cette phase.

\subsection{phase}
Quelques phases utilent :
\begin{itemize}
\item compile : permet de compiler le projet
\item package : permet de packager le projet
\item install : permet d'installer le projet dans son repository
\item deploy : permet d'installer le projet dans un repository distant
\item clean : permet de supprimer tout ce que Maven a créé
\item site : permet de créer le site du projet
\end{itemize}

\subsection{goal}
Chaque phase est composé d'un ou plusieur goal.
Par exemple, clean fait 3 goals : clean:pre-clean, clean:clean et clean:post-clean.
Deux goals tres interessants : release:prepare et release:performe qui permettent respectivement de faire une release en local et de la deployer. 

\section{Conclusion}
Maven est un outil vraiment puissant. Il a d'ailleur encore beaucoup de possibilité que je n'exploite pas encore, mais cela ne saurais tarder.

\end{document}
