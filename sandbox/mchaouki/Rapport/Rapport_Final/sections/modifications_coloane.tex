\section{Modifications apportées à Coloane}
Nous avons vus approximativement, les modifications apportées à Coloane, pour
déclarer des points d'extensions. A présent, nous allons présentés, les modifications 
au niveaux de l'intérface utilisateur, et les classes ajoutées.

\subsection{L'intérface utilisateur}
\subsubsection{Les items  \textit{"Imports From XXX..."} et \textit{"Exports To XXX..."}}
Comme, il sera dorénavant, possible d'ajouter différents formats pour 
la représentations de Réseau de Petri, il est inimaginable, qu'a chaque format XXX d'ajouter un 
des items \textit{Imports From XXX...} et \textit{Exports To XXX...}, dans le menu \textit{File}, 
cela devindrait trop gros.

Nous avons, donc, optés, pour seulement deux items \textit{Imports From...} et \textit{Exports To...}, 
dans le menu \textit{File}, qui permettent, d'ouvrire une boite de dialogue, et 
demandant à l'utilisateur de choisir un format, et le nom du fichier à importer, ou à exporter.

Pour cela, nous avons déclarer, dans \textbf{plugin.xml}, deux itmes, pour \textit{Imports From...} et 
\textit{Exports To...}.

\begin{verbatim}
<actionSet
            id="fr.lip6.move.coloane.actionSet.file"
            label="%FILEACTIONS_ID"
            visible="true">
         <action
               class="fr.lip6.move.coloane.core.ui.actions.ExportTo"
               icon="resources/icons/export_wiz.gif"
               id="exportTo"
               label="%EXPORT_TO_ITEM"
               menubarPath="file/import.ext"
               style="push">
         </action>
         <action
               class="fr.lip6.move.coloane.core.ui.actions.ImportFrom"
               icon="resources/icons/import_wiz.gif"
               id="importFrom"
               label="%IMPORT_FROM_ITEM"
               menubarPath="file/import.ext"
               style="push">
         </action>
      </actionSet>
\end{verbatim}
On peut voire, que nous avons définie deux classe:
\begin{verbatim}
fr.lip6.move.coloane.core.ui.actions.ExportTo
fr.lip6.move.coloane.core.ui.actions.ImportFrom
\end{verbatim}
ces classes sérvent à definre les actions à effectuer, lorsqu'un utilisateur appuie sur 
l'un de ces items. Il faut noter que ces classes peuvent être considérer comme génerique car 
elles sont capables de créer n'importe quelles instances pour importer ou exporter un format, en utilisant, 
\textbf{ExportToExtension} ou \textbf{ImportFromExtension}, nous y reviendrons, plus tard.

\subsubsection{Les boîtes de dialogues}
La définitions des boîtes de dialogues \textbf{ImportFrom} et \textbf{ExportTo}, sont faites dans
le package: 
\begin{verbatim}
fr.lip6.move.coloane.core.ui.dialogs
\end{verbatim}
Ces deux classes hérites de:
\begin{verbatim}
org.eclipse.jface.dialogs.Dialog;
\end{verbatim}
On peut remarquer, que ces classes font appel à \textbf{ExportToExtension} ou \textbf{ImportFromExtension}, 
pour afficher la liste des formats disponibles, nous y reviendrons plus tard.

\subsection{Les contraintes pour les extensions}
Pour que Coloane, puissent exporter et importer de nouveaux format, il faut que les extensions qui implémentes, 
ces services, réspectent certaines régles. Ces régles sont en faites des intérfaces à implémenter. Ici, nous avons 
deux interfaces:
\begin{verbatim}
fr.lip6.move.coloane.core.interfaces.IExportTo
fr.lip6.move.coloane.core.interfaces.IImportFrom
\end{verbatim}
ces intérfaces permettent à Coloane, de faire appel aux methodes (qui doivent étre commune à toutes les extensions), 
d'importations et d'exportations, quand l'utilisateur le demande, via les itmes correspondant.
\begin{verbatim}
public interface IExportTo {
	public void export(IModelImpl modeleCourant,String filePath) throws ColoaneException;
}

public interface IImportFrom {
	public IModelImpl importFrom(String filePath) throws ColoaneException;
}
\end{verbatim}
ces methodes sont utiliser par les classes:
\begin{verbatim}
fr.lip6.move.coloane.core.ui.actions.ExportTo
fr.lip6.move.coloane.core.ui.actions.ImportFrom
\end{verbatim}

\subsection{Comment savoire quelles extensions sont présentes}
L'une des difficultés, c'est de savoir quelles sont les extensions présentent, 
pour pouvoir afficher leur nom dans la liste déroulante des boîte de dialogues et ainssi pouvoire créé une 
instance pour exporter ou importer le formats voulu par l'utilisateur.

Pour cela nous avons, créé les classes suivnates:
\begin{verbatim}
fr.lip6.move.coloane.core.extensions.ExportToExtension
fr.lip6.move.coloane.core.extensions.ImportFromExtension
\end{verbatim}
Ces classes possedent deux methodes:
\begin{itemize}
  \item \verb?getAllNameExtensionConvert?: cette méthode est utiliser par les boîtes de dialogues \textbf{ImportFromDialog} et \textbf{ExportToDialog}, pour 
afficher la listes des noms des extensions.
  \item \verb?createConvertInstance     ?: cette méthode est utiliser 
par les classes qui \textbf{ImportFrom} et \textbf{ExportTo}, pour créé 
une instance pour exporter ou importer un format.
\end{itemize}
